# Javaæµ‹è¯•æŠ€æœ¯æ ˆæ€»è§ˆ

> Javaæµ‹è¯•æŠ€æœ¯å®Œæ•´æŒ‡å—ï¼šä»å•å…ƒæµ‹è¯•åˆ°è´¨é‡ä¿éšœçš„å…¨æ ˆè§£å†³æ–¹æ¡ˆ

## ğŸ“‹ æ™ºèƒ½å¯¼èˆªç›®å½•

### ğŸ¯ å¿«é€Ÿå®šä½ï¼ˆç‚¹å‡»ç›´è¾¾ï¼‰
| **ä½ çš„éœ€æ±‚** | **ç›´æ¥è·³è½¬** | **æ‰€éœ€æ—¶é—´** |
|---|---|---|
| **æˆ‘æ˜¯æ–°æ‰‹ï¼Œä»é›¶å¼€å§‹** | [é˜¶æ®µä¸€ï¼šåŸºç¡€æµ‹è¯•](#é˜¶æ®µä¸€åŸºç¡€æµ‹è¯•) | 1-2å‘¨ |
| **æˆ‘æœ‰é¡¹ç›®ï¼Œéœ€è¦é€‰å‹** | [æŠ€æœ¯é€‰å‹å†³ç­–ä¸­å¿ƒ](#æŠ€æœ¯é€‰å‹å†³ç­–ä¸­å¿ƒ) | 5åˆ†é’Ÿ |
| **æˆ‘è¦ä¼˜åŒ–ç°æœ‰æµ‹è¯•** | [è´¨é‡ä¿éšœæ ‡å‡†](#è´¨é‡ä¿éšœä¸æµ‹è¯•è¦†ç›–ç‡æ ‡å‡†) | 30åˆ†é’Ÿ |
| **æˆ‘è¦å¿«é€Ÿæ­å»º** | [5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹](#æ–°é¡¹ç›®æµ‹è¯•ç¯å¢ƒæ­å»º5åˆ†é’Ÿå®Œæˆ) | 5åˆ†é’Ÿ |
| **æŸ¥çœ‹å®Œæ•´æŠ€æœ¯æ ˆ** | [æŠ€æœ¯æ ˆå›¾è°±æ€»è§ˆ](#æŠ€æœ¯æ ˆå›¾è°±æ€»è§ˆ) | 2åˆ†é’Ÿ |

### ğŸ—ºï¸ å†…å®¹åœ°å›¾
```
ğŸ“Š æœ¬æ–‡æ¡£åŒ…å«ï¼š
â”œâ”€â”€ æŠ€æœ¯æ ˆå…¨æ™¯å¯¹æ¯”ï¼ˆè¡¨æ ¼åŒ–ï¼‰
â”œâ”€â”€ åœºæ™¯åŒ–é€‰å‹æŒ‡å—ï¼ˆå†³ç­–æ ‘ï¼‰
â”œâ”€â”€ æ¸è¿›å¼å­¦ä¹ è·¯å¾„ï¼ˆè·¯çº¿å›¾ï¼‰
â”œâ”€â”€ å®æˆ˜é…ç½®ç¤ºä¾‹ï¼ˆä»£ç ç‰‡æ®µï¼‰
â””â”€â”€ å¿«é€Ÿå¼€å§‹æ¸…å•ï¼ˆ5åˆ†é’Ÿæ­å»ºï¼‰
```

---

## æŠ€æœ¯æ ˆå›¾è°±æ€»è§ˆ

| å±‚çº§ | æŠ€æœ¯ç»„ä»¶ | ä¸»è¦ç”¨é€” | æ¨èæ–¹æ¡ˆ |
|---|---|---|---|
| æµ‹è¯•æ¡†æ¶ | JUnit 5, TestNG | æ ¸å¿ƒæµ‹è¯•å¼•æ“ | JUnit 5 âœ… |
| æ¨¡æ‹Ÿæ¡†æ¶ | Mockito, EasyMock, JMock | å¯¹è±¡è¡Œä¸ºæ¨¡æ‹Ÿ | Mockito âœ… |
| æ–­è¨€æ¡†æ¶ | AssertJ, Hamcrest, Truth | ç»“æœéªŒè¯ | AssertJ âœ… |
| è´¨é‡ä¿éšœ | JaCoCo, SonarQube, PIT | ä»£ç è´¨é‡åˆ†æ | ç»„åˆä½¿ç”¨ âœ… |
| é›†æˆæµ‹è¯• | Spring Boot Test, Testcontainers | é›†æˆç¯å¢ƒæµ‹è¯• | Spring Boot Test âœ… |
| BDDæµ‹è¯• | Cucumber, JBehave | è¡Œä¸ºé©±åŠ¨å¼€å‘ | Cucumber âœ… |
| APIæµ‹è¯• | REST Assured, Postman | æ¥å£æµ‹è¯• | REST Assured âœ… |
| UIæµ‹è¯• | Selenium, Playwright | ç•Œé¢è‡ªåŠ¨åŒ– | Selenium âœ… |

## å¼•è¨€ä¸æµ‹è¯•é‡è¦æ€§

### ä¸ºä»€ä¹ˆæµ‹è¯•æ˜¯è½¯ä»¶è´¨é‡çš„æ ¸å¿ƒ

åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œæµ‹è¯•ä¸å†ä»…ä»…æ˜¯å¼€å‘å®Œæˆåçš„éªŒè¯æ­¥éª¤ï¼Œè€Œæ˜¯è´¯ç©¿æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸçš„è´¨é‡ä¿éšœä½“ç³»ã€‚Javaä½œä¸ºä¼ä¸šçº§åº”ç”¨å¼€å‘çš„ä¸»æµè¯­è¨€ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„æµ‹è¯•æŠ€æœ¯æ ˆï¼Œèƒ½å¤Ÿæ”¯æ’‘ä»å°å‹é¡¹ç›®åˆ°å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„å„ç§æµ‹è¯•éœ€æ±‚ã€‚

æµ‹è¯•çš„æ ¸å¿ƒä»·å€¼ï¼š
- ç¼ºé™·é¢„é˜²ï¼šåœ¨å¼€å‘é˜¶æ®µå‘ç°å¹¶ä¿®å¤é—®é¢˜ï¼Œé™ä½åæœŸä¿®å¤æˆæœ¬
- è®¾è®¡æ”¹è¿›ï¼šé€šè¿‡æµ‹è¯•é©±åŠ¨æ›´å¥½çš„ä»£ç è®¾è®¡å’Œæ¶æ„
- å›å½’ä¿æŠ¤ï¼šç¡®ä¿æ–°åŠŸèƒ½ä¸å½±å“ç°æœ‰åŠŸèƒ½
- æ–‡æ¡£ä½œç”¨ï¼šæµ‹è¯•ç”¨ä¾‹æœ¬èº«å°±æ˜¯æœ€å¥½çš„åŠŸèƒ½æ–‡æ¡£
- å›¢é˜Ÿåä½œï¼šç»Ÿä¸€çš„æµ‹è¯•æ ‡å‡†ä¿ƒè¿›å›¢é˜Ÿåä½œ

### æµ‹è¯•é‡‘å­—å¡”ç†è®º

```

        âš¡ å¿«é€Ÿåé¦ˆ
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     UIæµ‹è¯•      â”‚ å°‘é‡  (ç«¯åˆ°ç«¯)
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚   æœåŠ¡/APIæµ‹è¯•   â”‚ ä¸­ç­‰  (é›†æˆæµ‹è¯•)
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚    å•å…ƒæµ‹è¯•     â”‚ å¤§é‡  (å¿«é€Ÿå¯é )
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        ğŸ“Š æµ‹è¯•æ•°é‡

```

å„å±‚æµ‹è¯•ç‰¹ç‚¹ï¼š

| æµ‹è¯•ç±»å‹ | æ‰§è¡Œé€Ÿåº¦ | ç»´æŠ¤æˆæœ¬ | é—®é¢˜å®šä½ | è¦†ç›–èŒƒå›´ |
|---|---|---|---|---|
| å•å…ƒæµ‹è¯• | âš¡âš¡âš¡ | ğŸ’° | ğŸ”ğŸ”ğŸ” | ä»£ç çº§ |
| é›†æˆæµ‹è¯• | âš¡âš¡ | ğŸ’°ğŸ’° | ğŸ”ğŸ” | æ¨¡å—çº§ |
| ç«¯åˆ°ç«¯æµ‹è¯• | âš¡ | ğŸ’°ğŸ’°ğŸ’° | ğŸ” | ç³»ç»Ÿçº§ |

### Javaæµ‹è¯•ç”Ÿæ€æ¦‚è§ˆ

Javaæµ‹è¯•ç”Ÿæ€ç³»ç»Ÿç»è¿‡20å¤šå¹´çš„å‘å±•ï¼Œå½¢æˆäº†å®Œæ•´çš„æŠ€æœ¯æ ˆï¼š

æ ¸å¿ƒæ¼”è¿›è·¯å¾„ï¼š
- JUnit 3/4 â†’ JUnit 5 (ç°ä»£æµ‹è¯•æ¡†æ¶æ ‡å‡†)
- æ‰‹å·¥mock â†’ Mockito (æ™ºèƒ½æ¨¡æ‹Ÿæ¡†æ¶)
- åŸºæœ¬æ–­è¨€ â†’ AssertJ (æµç•…æ–­è¨€)
- å•æœºæµ‹è¯• â†’ Testcontainers (çœŸå®ç¯å¢ƒæµ‹è¯•)
- ä»£ç è¦†ç›– â†’ è´¨é‡é—¨ç¦ (å…¨é¢è´¨é‡ä¿éšœ)

##### AIé©±åŠ¨çš„æµ‹è¯•æŠ€æœ¯

AIæŠ€æœ¯æ­£åœ¨æ·±åˆ»å˜é©Java Spring Bootåº”ç”¨çš„æµ‹è¯•æ–¹å¼ï¼Œé€šè¿‡æœºå™¨å­¦ä¹ ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰æŠ€æœ¯ï¼ŒAIèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ä»£ç ã€è¯†åˆ«æ½œåœ¨ç¼ºé™·ã€ä¼˜åŒ–æµ‹è¯•è¦†ç›–ï¼Œå¹¶åœ¨UIå˜åŒ–æ—¶è‡ªé€‚åº”è°ƒæ•´æµ‹è¯•è„šæœ¬ã€‚

**ä¸»è¦ä¼˜åŠ¿ï¼š**
- è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜å¼€å‘æ•ˆç‡
- æ™ºèƒ½åˆ†æä»£ç ï¼Œå‘ç°äººå·¥éš¾ä»¥è¦†ç›–çš„è¾¹ç¼˜åœºæ™¯
- è‡ªé€‚åº”UIå’ŒAPIå˜åŒ–ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
- ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œé¡ºåºï¼Œæé«˜å›å½’æµ‹è¯•æ•ˆç‡

[è¯¦ç»†äº†è§£AIåœ¨Java Spring Bootæµ‹è¯•ä¸­çš„åº”ç”¨ â†’ ](practices/ai-testing.md)

### æµ‹è¯•åˆ†ç±»ä¸ç­–ç•¥

### æµ‹è¯•ç±»å‹è¯¦è§£ - ç»¼åˆæŠ€æœ¯é€‰å‹è¡¨

#### ğŸ“Š æµ‹è¯•ç±»å‹æŠ€æœ¯é€‰å‹æ€»è§ˆè¡¨

| **æµ‹è¯•ç±»å‹** | **æ ¸å¿ƒåœºæ™¯** | **æµ‹è¯•æ¡†æ¶** | **æ¨¡æ‹Ÿæ¡†æ¶** | **æ–­è¨€æ¡†æ¶** | **è´¨é‡ä¿è¯** | **æ‰§è¡Œé€Ÿåº¦** | **ç»´æŠ¤æˆæœ¬** | **é€‚ç”¨é˜¶æ®µ** |
|---|---|---|---|---|---|---|---|---|
| **å•å…ƒæµ‹è¯•** | å•ä¸ªç±»/æ–¹æ³•éªŒè¯ | JUnit 5/TestNG | Mockito/EasyMock | AssertJ/Hamcrest | JaCoCoè¡Œè¦†ç›–>70% | âš¡âš¡âš¡ æ¯«ç§’çº§ | ğŸ’° ä½ | å¼€å‘é˜¶æ®µ |
| **é›†æˆæµ‹è¯•** | å¤šç»„ä»¶äº¤äº’éªŒè¯ | Spring Boot Test | Testcontainers | AssertJ | åˆ†æ”¯è¦†ç›–>60% | âš¡âš¡ ç§’çº§ | ğŸ’°ğŸ’° ä¸­ç­‰ | é›†æˆé˜¶æ®µ |
| **ç«¯åˆ°ç«¯æµ‹è¯•** | ç”¨æˆ·åœºæ™¯å…¨æµç¨‹ | Selenium/Playwright | WireMock(MockServer) | REST Assured | ç«¯åˆ°ç«¯è¦†ç›–+æ€§èƒ½ | âš¡ åˆ†é’Ÿçº§ | ğŸ’°ğŸ’°ğŸ’° é«˜ | éªŒæ”¶é˜¶æ®µ |
| **APIæµ‹è¯•** | æ¥å£å¥‘çº¦éªŒè¯ | REST Assured/Karate | MockServer | REST Assured | APIå¥‘çº¦æµ‹è¯• | âš¡âš¡ ç§’çº§ | ğŸ’°ğŸ’° ä¸­ç­‰ | é›†æˆé˜¶æ®µ |
| **AIè¾…åŠ©æµ‹è¯•** | æ™ºèƒ½æµ‹è¯•ç”Ÿæˆä¸æ‰§è¡Œ | é€šä¹‰çµç /é£ç®—JavaAI | æ™ºèƒ½Mockç”Ÿæˆ | æ™ºèƒ½æ–­è¨€ç”Ÿæˆ | å…¨é¢è´¨é‡åˆ†æ | âš¡âš¡âš¡ é«˜æ•ˆ | ğŸ’° ä½ | å…¨ç”Ÿå‘½å‘¨æœŸ |
| **æ•°æ®åº“æµ‹è¯•** | SQL/ORMéªŒè¯ | Testcontainers+JUnit5 | Dockerå®¹å™¨åŒ– | AssertJ | æ•°æ®ä¸€è‡´æ€§æµ‹è¯• | âš¡âš¡ ç§’çº§ | ğŸ’°ğŸ’° ä¸­ç­‰ | æ•°æ®å±‚ |
| **æ€§èƒ½æµ‹è¯•** | è´Ÿè½½/å¹¶å‘éªŒè¯ | JMeter/Gatling | çœŸå®ç¯å¢ƒ | æ€§èƒ½æ–­è¨€ | æ€§èƒ½åŸºå‡†+ç›‘æ§ | âš¡ åˆ†é’Ÿçº§+ | ğŸ’°ğŸ’°ğŸ’° é«˜ | å‘å¸ƒå‰ |
| **UIè‡ªåŠ¨åŒ–** | ç”¨æˆ·ç•Œé¢éªŒè¯ | Selenium/Playwright | çœŸå®æµè§ˆå™¨ | è§†è§‰æ–­è¨€ | è·¨æµè§ˆå™¨å…¼å®¹ | âš¡âš¡ åˆ†é’Ÿçº§ | ğŸ’°ğŸ’°ğŸ’° é«˜ | éªŒæ”¶é˜¶æ®µ |
| **æ¶ˆæ¯é˜Ÿåˆ—æµ‹è¯•** | å¼‚æ­¥æ¶ˆæ¯éªŒè¯ | Embedded Kafka+JUnit5 | Mockæ¶ˆæ¯ä¸­é—´ä»¶ | AssertJ | æ¶ˆæ¯é¡ºåº+å¹‚ç­‰æ€§ | âš¡âš¡ ç§’çº§ | ğŸ’°ğŸ’° ä¸­ç­‰ | é›†æˆé˜¶æ®µ |

#### ğŸ¯ åœºæ™¯-æŠ€æœ¯æ˜ å°„å†³ç­–çŸ©é˜µ

| **ä¸šåŠ¡åœºæ™¯** | **æ¨èæµ‹è¯•ç±»å‹** | **æŠ€æœ¯ç»„åˆ** | **å…³é”®é…ç½®** | **æœ€ä½³å®è·µ** |
|---|---|---|---|---|
| **Spring Boot Web** | å•å…ƒ+é›†æˆ+API | JUnit5+Mockito+SpringBootTest+Testcontainers | `@SpringBootTest`+`@MockBean` | æµ‹è¯•åˆ‡ç‰‡+å®¹å™¨åŒ– |
| **å¾®æœåŠ¡æ¶æ„** | API+é›†æˆ+å¥‘çº¦ | JUnit5+RESTAssured+Testcontainers+Pact | `@SpringBootTest`+MockServer | å¥‘çº¦æµ‹è¯•+æœåŠ¡è™šæ‹ŸåŒ– |
| **é«˜å¹¶å‘ç³»ç»Ÿ** | å•å…ƒ+æ€§èƒ½ | JUnit5+JMeter+Testcontainers | `@TestPropertySource`+æ€§èƒ½é…ç½® | åŸºå‡†æµ‹è¯•+ç›‘æ§ |
| **æ•°æ®å¯†é›†å‹** | å•å…ƒ+æ•°æ®åº“ | JUnit5+Testcontainers+AssertJ | `@DataJpaTest`+Flyway | æ•°æ®è¿ç§»+æ¸…ç† |
| **æ‰¹å¤„ç†ç³»ç»Ÿ** | å•å…ƒ+é›†æˆ | JUnit5+Mockito+SpringBatchTest | `@SpringBatchTest`+JobLauncher | ä½œä¸šæµ‹è¯•+åˆ†ç‰‡ |
| **å®æ—¶æ¶ˆæ¯** | é›†æˆ+æ¶ˆæ¯ | JUnit5+EmbeddedKafka+AssertJ | `@EmbeddedKafka`+TestUtils | æ¶ˆæ¯æ–­è¨€+é‡è¯• |

#### ğŸ“ˆ è´¨é‡ä¿è¯é˜¶æ¢¯

| **è´¨é‡å±‚çº§** | **å•å…ƒæµ‹è¯•** | **é›†æˆæµ‹è¯•** | **ç«¯åˆ°ç«¯æµ‹è¯•** | **è´¨é‡é—¨ç¦** |
|---|---|---|---|---|
| **Level 1: åŸºç¡€** | è¡Œè¦†ç›–>70% | å…³é”®è·¯å¾„è¦†ç›– | æ ¸å¿ƒåœºæ™¯éªŒè¯ | æ„å»ºå¤±è´¥é˜ˆå€¼ |
| **Level 2: æ ‡å‡†** | åˆ†æ”¯è¦†ç›–>60% | æ•°æ®å±‚å®Œæ•´è¦†ç›– | å…³é”®ç”¨æˆ·æ—…ç¨‹ | SonarQubeè´¨é‡é—¨ |
| **Level 3: é«˜çº§** | å˜æ›´æ£€æµ‹>80% | å¥‘çº¦æµ‹è¯•100% | è·¨æµè§ˆå™¨å…¼å®¹ | æ€§èƒ½å›å½’æ£€æµ‹ |
| **Level 4: ä¼ä¸š** | çªå˜æµ‹è¯•>50% | æ··æ²Œå·¥ç¨‹éªŒè¯ | ç”Ÿäº§å½±å­éªŒè¯ | è‡ªåŠ¨åŒ–è´¨é‡æŠ¥å‘Š

#### ğŸ”§ æŠ€æœ¯é€‰å‹å¿«é€Ÿå†³ç­–æ ‘

```
é¡¹ç›®éœ€æ±‚è¯„ä¼°
â”œâ”€â”€ é¡¹ç›®ç±»å‹ï¼Ÿ
â”‚   â”œâ”€â”€ Webåº”ç”¨ â†’ Spring Boot Test + JUnit5 + Mockito
â”‚   â”œâ”€â”€ å¾®æœåŠ¡ â†’ REST Assured + Testcontainers + Pact
â”‚   â”œâ”€â”€ æ‰¹å¤„ç† â†’ JUnit5 + Mockito + SpringBatchTest
â”‚   â””â”€â”€ å®æ—¶ç³»ç»Ÿ â†’ Embeddedä¸­é—´ä»¶ + Testcontainers
â”œâ”€â”€ å›¢é˜Ÿè§„æ¨¡ï¼Ÿ
â”‚   â”œâ”€â”€ å°å‹å›¢é˜Ÿ â†’ JUnit5 + Mockito + AssertJ
â”‚   â”œâ”€â”€ å¤§å‹å›¢é˜Ÿ â†’ TestNG + åˆ†ç»„æµ‹è¯• + CIé›†æˆ
â”‚   â””â”€â”€ åˆ†å¸ƒå¼å›¢é˜Ÿ â†’ å¥‘çº¦æµ‹è¯• + å®¹å™¨åŒ–
â””â”€â”€ è´¨é‡è¦æ±‚ï¼Ÿ
    â”œâ”€â”€ åŸºç¡€éªŒè¯ â†’ å•å…ƒ+é›†æˆæµ‹è¯•
    â”œâ”€â”€ ä¼ä¸šçº§ â†’ å…¨é‡‘å­—å¡”è¦†ç›–
    â””â”€â”€ é‡‘èçº§ â†’ å®‰å…¨+æ€§èƒ½+åˆè§„æµ‹è¯•
```

#### ğŸ’¡ å®æ–½å»ºè®®

1. **èµ·æ­¥é¡¹ç›®**: ä»å•å…ƒæµ‹è¯•å¼€å§‹ï¼Œä½¿ç”¨JUnit5+Mockito+AssertJç»„åˆ
2. **æˆé•¿é¡¹ç›®**: é€æ­¥å¼•å…¥é›†æˆæµ‹è¯•ï¼Œä½¿ç”¨Testcontainersè¿›è¡Œæ•°æ®åº“æµ‹è¯•
3. **æˆç†Ÿé¡¹ç›®**: å»ºç«‹å®Œæ•´çš„æµ‹è¯•é‡‘å­—å¡”ï¼ŒåŒ…å«å•å…ƒ+é›†æˆ+ç«¯åˆ°ç«¯æµ‹è¯•
4. **ä¼ä¸šçº§é¡¹ç›®**: å®æ–½å…¨é¢çš„è´¨é‡é—¨ç¦ï¼ŒåŒ…å«ä»£ç è¦†ç›–ã€å®‰å…¨æ‰«æã€æ€§èƒ½æµ‹è¯•

### ğŸ¯ æŠ€æœ¯é€‰å‹å†³ç­–ä¸­å¿ƒï¼ˆåˆå¹¶ç­–ç•¥æŒ‡å—ï¼‰

#### ğŸ“‹ ä¸€é”®å†³ç­–çŸ©é˜µ

**é¡¹ç›®é˜¶æ®µ + æŠ€æœ¯æ ˆ + è´¨é‡è¦æ±‚ ç»Ÿä¸€é€‰æ‹©**:

| **é¡¹ç›®é˜¶æ®µ** | **æŠ€æœ¯æ ˆç»„åˆ** | **æµ‹è¯•é‡ç‚¹** | **è´¨é‡ç›®æ ‡** | **å¿«é€Ÿå¼€å§‹** |
|---|---|---|---|---|
| **åˆåˆ›é¡¹ç›®** | JUnit5 + Mockito + AssertJ | å•å…ƒæµ‹è¯•80% + é›†æˆ20% | è¦†ç›–ç‡>60% | [5åˆ†é’Ÿæ­å»º](#æ–°é¡¹ç›®æµ‹è¯•ç¯å¢ƒæ­å»º5åˆ†é’Ÿå®Œæˆ) |
| **æˆé•¿é¡¹ç›®** | +SpringBootTest + Testcontainers | å…¨å±‚çº§è¦†ç›– | è¦†ç›–ç‡>70% + SonarQube | [æŸ¥çœ‹ç¤ºä¾‹](./examples/spring-boot-test-example.md) |
| **æˆç†Ÿé¡¹ç›®** | +RESTAssured + PIT | é‡‘å­—å¡”å…¨è¦†ç›– | è¦†ç›–ç‡>80% + å˜å¼‚æµ‹è¯• | [è¿›é˜¶æŒ‡å—](./practices/integration-testing.md) |
| **ä¼ä¸šé¡¹ç›®** | +JMeter + æ··æ²Œå·¥ç¨‹ | å…¨ç”Ÿå‘½å‘¨æœŸæµ‹è¯• | ä¼ä¸šçº§è´¨é‡é—¨ç¦ | [æ¶æ„æŒ‡å—](./practices/unit-testing.md) |

#### ğŸš€ åœºæ™¯åŒ–å¿«é€Ÿé€‰æ‹©

**æŒ‰é¡¹ç›®ç±»å‹ç›´æ¥å®šä½**:

```
é¡¹ç›®ç±»å‹å¿«é€ŸåŒ¹é…
â”œâ”€â”€ ğŸŒ Spring Boot Webåº”ç”¨
â”‚   â”œâ”€â”€ æŠ€æœ¯æ ˆ: JUnit5 + Mockito + SpringBootTest + Testcontainers
â”‚   â”œâ”€â”€ é‡ç‚¹: Controller/Service/Repositoryåˆ†å±‚æµ‹è¯•
â”‚   â””â”€â”€ é…ç½®: @SpringBootTest + @MockBean + @DataJpaTest
â”œâ”€â”€ ğŸ”— å¾®æœåŠ¡æ¶æ„
â”‚   â”œâ”€â”€ æŠ€æœ¯æ ˆ: JUnit5 + RESTAssured + Testcontainers + Pact
â”‚   â”œâ”€â”€ é‡ç‚¹: APIå¥‘çº¦æµ‹è¯• + æœåŠ¡è™šæ‹ŸåŒ–
â”‚   â””â”€â”€ é…ç½®: MockServer + @SpringBootTest(webEnvironment=RANDOM_PORT)
â”œâ”€â”€ âš¡ é«˜å¹¶å‘ç³»ç»Ÿ
â”‚   â”œâ”€â”€ æŠ€æœ¯æ ˆ: JUnit5 + JMeter + Testcontainers + ç›‘æ§
â”‚   â”œâ”€â”€ é‡ç‚¹: æ€§èƒ½åŸºå‡†æµ‹è¯• + å¹¶å‘éªŒè¯
â”‚   â””â”€â”€ é…ç½®: @TestPropertySource + æ€§èƒ½æµ‹è¯•é…ç½®
â”œâ”€â”€ ğŸ“Š æ‰¹å¤„ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ æŠ€æœ¯æ ˆ: JUnit5 + Mockito + SpringBatchTest + AssertJ
â”‚   â”œâ”€â”€ é‡ç‚¹: ä½œä¸šæµ‹è¯• + æ•°æ®éªŒè¯
â”‚   â””â”€â”€ é…ç½®: @SpringBatchTest + JobLauncherTestUtils
â””â”€â”€ ğŸ’¬ å®æ—¶æ¶ˆæ¯ç³»ç»Ÿ
    â”œâ”€â”€ æŠ€æœ¯æ ˆ: JUnit5 + EmbeddedKafka + Testcontainers
    â”œâ”€â”€ é‡ç‚¹: æ¶ˆæ¯é¡ºåº + å¹‚ç­‰æ€§éªŒè¯
    â””â”€â”€ é…ç½®: @EmbeddedKafka + KafkaTestUtils
```

### ğŸ“Š è´¨é‡ä¿éšœä¸æµ‹è¯•è¦†ç›–ç‡æ ‡å‡†

#### ğŸ¯ ç»Ÿä¸€è´¨é‡æ ‡å‡†

**è´¨é‡ä¿è¯é˜¶æ¢¯ï¼ˆåˆå¹¶è¦†ç›–ç‡æ ‡å‡†ï¼‰**:

| **è´¨é‡å±‚çº§** | **å•å…ƒæµ‹è¯•** | **é›†æˆæµ‹è¯•** | **ç«¯åˆ°ç«¯æµ‹è¯•** | **è¦†ç›–ç‡æ ‡å‡†** | **è´¨é‡é—¨ç¦** |
|---|---|---|---|---|---|
| **Level 1: åŸºç¡€** | è¡Œè¦†ç›–>70% | å…³é”®è·¯å¾„è¦†ç›– | æ ¸å¿ƒåœºæ™¯éªŒè¯ | è¡Œè¦†ç›–70%+ | æ„å»ºå¤±è´¥é˜ˆå€¼ |
| **Level 2: æ ‡å‡†** | åˆ†æ”¯è¦†ç›–>60% | æ•°æ®å±‚å®Œæ•´è¦†ç›– | å…³é”®ç”¨æˆ·æ—…ç¨‹ | åˆ†æ”¯è¦†ç›–60%+ | SonarQubeè´¨é‡é—¨ |
| **Level 3: é«˜çº§** | å˜æ›´æ£€æµ‹>80% | å¥‘çº¦æµ‹è¯•100% | è·¨æµè§ˆå™¨å…¼å®¹ | æ–¹æ³•è¦†ç›–80%+ | æ€§èƒ½å›å½’æ£€æµ‹ |
| **Level 4: ä¼ä¸š** | çªå˜æµ‹è¯•>50% | æ··æ²Œå·¥ç¨‹éªŒè¯ | ç”Ÿäº§å½±å­éªŒè¯ | ç±»è¦†ç›–90%+ | è‡ªåŠ¨åŒ–è´¨é‡æŠ¥å‘Š

#### ğŸ“ˆ è¦†ç›–ç‡é…ç½®æŒ‡å—

**æ™ºèƒ½è¦†ç›–ç‡ç›®æ ‡**ï¼ˆé¿å…è¿‡åº¦è¿½æ±‚100%ï¼‰ï¼š
- **æ ¸å¿ƒé¢†åŸŸ**: 90%+ è¡Œè¦†ç›–ç‡ï¼Œ80%+ åˆ†æ”¯è¦†ç›–ç‡
- **æ™®é€šä¸šåŠ¡**: 80%+ è¡Œè¦†ç›–ç‡ï¼Œ60%+ åˆ†æ”¯è¦†ç›–ç‡  
- **UI/é…ç½®ç±»**: 50%+ è¡Œè¦†ç›–ç‡å³å¯
- **å·¥å…·ç±»**: 95%+ è¡Œè¦†ç›–ç‡ï¼ˆé«˜ä»·å€¼ï¼‰

**ç›‘æ§å·¥å…·é›†æˆ**:
```xml
<!-- JaCoCoé…ç½® -->
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <configuration>
        <excludes>
            <exclude>**/config/**</exclude>
            <exclude>**/model/**</exclude>
        </excludes>
    </configuration>
</plugin>
```

## æµ‹è¯•æ¡†æ¶å±‚

### JUnit 5 - ç°ä»£æµ‹è¯•æ ‡å‡†

#### JUnit 5æ¶æ„é©æ–°

JUnit 5å¼•å…¥äº†é©å‘½æ€§çš„æ¨¡å—åŒ–æ¶æ„ï¼š

```

JUnit Platform â”
              â”œâ”€ æµ‹è¯•å¼•æ“åŸºç¡€
JUnit Jupiter â”¤
              â””â”€ ç¼–ç¨‹æ‰©å±•æ¨¡å‹
JUnit Vintage

```

æ ¸å¿ƒä¼˜åŠ¿ï¼š
- Lambdaè¡¨è¾¾å¼æ”¯æŒï¼šæ›´ç®€æ´çš„æ–­è¨€å’Œå‡è®¾
- åŠ¨æ€æµ‹è¯•ç”Ÿæˆï¼šè¿è¡Œæ—¶ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
- æ‰©å±•æ¨¡å‹ï¼šå¼ºå¤§çš„ç¬¬ä¸‰æ–¹æ‰©å±•èƒ½åŠ›
- æ¡ä»¶åŒ–æµ‹è¯•ï¼šåŸºäºç¯å¢ƒçš„æ¡ä»¶æ‰§è¡Œ

#### JUnit 5 vs TestNGå¯¹æ¯”

| ç‰¹æ€§ç»´åº¦ | JUnit 5 | TestNG | é€‰æ‹©å»ºè®® |
|---|---|---|---|
| å­¦ä¹ æ›²çº¿ | â­â­â­ | â­â­ | æ–°æ‰‹é€‰JUnit 5 |
| å¹¶è¡Œæµ‹è¯• | å†…ç½®æ”¯æŒ | åŸç”Ÿæ”¯æŒ | é«˜å¹¶å‘é€‰TestNG |
| æ•°æ®é©±åŠ¨ | @ParameterizedTest | @DataProvider | å¤æ‚æ•°æ®é€‰TestNG |
| ä¾èµ–æµ‹è¯• | ä¸æ”¯æŒ | æ”¯æŒ | æµç¨‹æµ‹è¯•é€‰TestNG |
| IDEæ”¯æŒ | å®Œç¾ | è‰¯å¥½ | å¼€å‘ä½“éªŒä¼˜å…ˆé€‰JUnit 5 |
| Springé›†æˆ | æ— ç¼é›†æˆ | éœ€è¦é…ç½® | Springé¡¹ç›®é€‰JUnit 5 |

#### JUnit 5æœ€ä½³å®è·µ

```java

@DisplayName("è®¢å•æœåŠ¡æµ‹è¯•")
@Tag("unit-test")
class OrderServiceTest {
    
    @Nested
    @DisplayName("æŠ˜æ‰£è®¡ç®—åœºæ™¯")
    class DiscountCalculationTest {
        
        @ParameterizedTest
        @CsvSource({
            "100, NORMAL, 0",
            "100, PREMIUM, 10",
            "100, VIP, 20"
        })
        void shouldCalculateDiscount(BigDecimal amount, UserType type, int expectedDiscount) {
            // æµ‹è¯•å®ç°
        }
    }
}

```

### TestNG - ä¼ä¸šçº§æµ‹è¯•æ¡†æ¶

#### TestNGæ ¸å¿ƒç‰¹æ€§

é«˜çº§ç‰¹æ€§ï¼š
- æµ‹è¯•åˆ†ç»„ï¼šç²¾ç»†çš„æµ‹è¯•åˆ†ç±»ç®¡ç†
- ä¾èµ–æµ‹è¯•ï¼šæµ‹è¯•æ–¹æ³•é—´çš„ä¾èµ–å…³ç³»
- å¹¶è¡Œæ‰§è¡Œï¼šå¤šçº¿ç¨‹æµ‹è¯•æ‰§è¡Œ
- æ•°æ®é©±åŠ¨ï¼šå¼ºå¤§çš„æ•°æ®æä¾›æœºåˆ¶

#### TestNGé€‚ç”¨åœºæ™¯

| åœºæ™¯ç±»å‹ | TestNGä¼˜åŠ¿ | ç¤ºä¾‹é…ç½® |
|---|---|---|
| å¤æ‚ä¸šåŠ¡æµç¨‹ | ä¾èµ–æµ‹è¯•æ”¯æŒ | @Test(dependsOnMethods = {"login"}) |
| å¤§æ•°æ®é‡æµ‹è¯• | DataProvideræœºåˆ¶ | @DataProvider(name = "userData") |
| å¹¶è¡Œæµ‹è¯• | å†…ç½®å¹¶è¡Œæ”¯æŒ | @Test(threadPoolSize = 3) |
| æµ‹è¯•å¥—ä»¶ | XMLé…ç½®çµæ´» | testng.xml |

## æ¨¡æ‹Ÿæ¡†æ¶æŠ€æœ¯æ ˆ

### Mockito - ä¸šç•Œæ ‡å‡†æ¨¡æ‹Ÿæ¡†æ¶

#### Mockitoæ ¸å¿ƒèƒ½åŠ›

åŠŸèƒ½çŸ©é˜µï¼š

| åŠŸèƒ½ç±»åˆ« | Mockitoæ”¯æŒ | ä½¿ç”¨åœºæ™¯ |
|---|---|---|
| å¯¹è±¡æ¨¡æ‹Ÿ | âœ… å®Œæ•´æ”¯æŒ | æ¥å£å’Œç±»æ¨¡æ‹Ÿ |
| è¡Œä¸ºéªŒè¯ | âœ… ä¸°å¯ŒAPI | æ–¹æ³•è°ƒç”¨éªŒè¯ |
| å‚æ•°åŒ¹é… | âœ… çµæ´»åŒ¹é… | å¤æ‚å‚æ•°éªŒè¯ |
| éƒ¨åˆ†æ¨¡æ‹Ÿ | âœ… Spyæœºåˆ¶ | çœŸå®å¯¹è±¡éƒ¨åˆ†mock |
| é™æ€æ–¹æ³• | âœ… 3.4+æ”¯æŒ | é™æ€å·¥å…·ç±»æµ‹è¯• |

#### Mockito vs å…¶ä»–æ¡†æ¶å¯¹æ¯”

| å¯¹æ¯”ç»´åº¦ | Mockito | EasyMock | JMock | PowerMock |
|---|---|---|---|---|
| è¯­æ³•ç®€æ´æ€§ | â­â­â­â­â­ | â­â­â­ | â­â­ | â­â­â­ |
| å­¦ä¹ æ›²çº¿ | å¹³ç¼“ | ä¸­ç­‰ | é™¡å³­ | é™¡å³­ |
| åŠŸèƒ½å®Œæ•´æ€§ | é«˜ | ä¸­ç­‰ | ä¸­ç­‰ | å¾ˆé«˜ |
| ç¤¾åŒºæ´»è·ƒåº¦ | é«˜ | ä½ | ä½ | ä¸­ç­‰ |
| ç»´æŠ¤çŠ¶æ€ | æ´»è·ƒ | ç»´æŠ¤ | ç»´æŠ¤ | ç»´æŠ¤ |

### é«˜çº§æ¨¡æ‹ŸæŠ€æœ¯

#### å¤æ‚åœºæ™¯æ¨¡æ‹Ÿ

å¤šå±‚ä¾èµ–æ¨¡æ‹Ÿï¼š

```java

@Test
void shouldHandleComplexBusinessLogic() {
    // åˆ›å»ºå¤šå±‚mock
    @Mock UserRepository userRepo;
    @Mock PaymentService paymentService;
    @Mock NotificationService notificationService;
    
    // é“¾å¼mocké…ç½®
    when(userRepo.findById(anyLong()))
        .thenReturn(Optional.of(createTestUser()));
    
    when(paymentService.process(any(PaymentRequest.class)))
        .thenReturn(PaymentResult.success());
}

```

#### é›†æˆæµ‹è¯•ä¸­çš„æ¨¡æ‹Ÿç­–ç•¥

| æµ‹è¯•ç±»å‹ | æ¨¡æ‹Ÿç­–ç•¥ | æ¨èå·¥å…· |
|---|---|---|
| Repositoryæµ‹è¯• | æ•°æ®åº“å®¹å™¨åŒ– | Testcontainers |
| å¤–éƒ¨APIæµ‹è¯• | Mock Server | WireMock, MockServer |
| æ¶ˆæ¯é˜Ÿåˆ—æµ‹è¯• | åµŒå…¥å¼Broker | Embedded Kafka |

## æ–­è¨€æ¡†æ¶æŠ€æœ¯æ ˆ

### AssertJ - æµç•…æ–­è¨€æ¡†æ¶

#### AssertJæ ¸å¿ƒç‰¹æ€§

æµç•…APIè®¾è®¡ï¼š

```java

// AssertJ vs JUnitæ–­è¨€å¯¹æ¯”

// JUnitä¼ ç»Ÿæ–­è¨€
assertEquals("Alice", user.getName());
assertTrue(user.getAge() > 18);

// AssertJæµç•…æ–­è¨€
assertThat(user.getName()).isEqualTo("Alice");
assertThat(user.getAge()).isGreaterThan(18);

```

#### AssertJé«˜çº§åŠŸèƒ½

| åŠŸèƒ½ç±»åˆ« | ç¤ºä¾‹ä»£ç  | é€‚ç”¨åœºæ™¯ |
|---|---|---|
| é›†åˆæ–­è¨€ | `assertThat(users).extracting(User::getName).contains("Alice")` | åˆ—è¡¨éªŒè¯ |
| å¼‚å¸¸æ–­è¨€ | `assertThatThrownBy(() -> service.call()).isInstanceOf(BusinessException.class)` | å¼‚å¸¸æµ‹è¯• |
| æ–‡ä»¶æ–­è¨€ | `assertThat(file).exists().isFile().hasContent("expected content")` | æ–‡ä»¶éªŒè¯ |
| æ—¥æœŸæ–­è¨€ | `assertThat(date).isToday().isAfter(startDate)` | æ—¶é—´éªŒè¯ |

### æ–­è¨€æ¡†æ¶å¯¹æ¯”

| æ–­è¨€æ¡†æ¶ | è¯­æ³•é£æ ¼ | åŠŸèƒ½ä¸°å¯Œåº¦ | å­¦ä¹ æˆæœ¬ | æ¨èåœºæ™¯ |
|---|---|---|---|---|
| AssertJ | æµç•…é“¾å¼ | â­â­â­â­â­ | ä½ | é€šç”¨æ–­è¨€ |
| Hamcrest | åŒ¹é…å™¨æ¨¡å¼ | â­â­â­â­ | ä¸­ç­‰ | å¤æ‚åŒ¹é… |
| Truth | æµç•…é“¾å¼ | â­â­â­ | ä½ | GoogleæŠ€æœ¯æ ˆ |

## é›†æˆæµ‹è¯•æŠ€æœ¯æ ˆ

### Spring Boot Test - ä¸€ç«™å¼æµ‹è¯•

#### æµ‹è¯•åˆ‡ç‰‡æŠ€æœ¯

Spring Bootæä¾›äº†ç²¾ç»†åŒ–çš„æµ‹è¯•åˆ‡ç‰‡ï¼š

| æµ‹è¯•åˆ‡ç‰‡ | åŠ è½½å†…å®¹ | ä½¿ç”¨åœºæ™¯ |
|---|---|---|
| @WebMvcTest | Webå±‚(Controller) | æµ‹è¯•MVCæ§åˆ¶å™¨ |
| @DataJpaTest | JPAå±‚(Repository) | æµ‹è¯•æ•°æ®è®¿é—®å±‚ |
| @RestClientTest | RESTå®¢æˆ·ç«¯ | æµ‹è¯•HTTPè°ƒç”¨ |
| @JsonTest | JSONåºåˆ—åŒ– | æµ‹è¯•JSONå¤„ç† |

#### æµ‹è¯•é…ç½®ç­–ç•¥

```java

@SpringBootTest
@AutoConfigureMockMvc
@TestPropertySource(locations = "classpath:test.properties")
class UserIntegrationTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @MockBean
    private UserService userService;
    
    @Test
    void shouldCreateUser() throws Exception {
        mockMvc.perform(post("/api/users")
                .contentType(MediaType.APPLICATION_JSON)
                .content(createUserJson()))
            .andExpect(status().isCreated());
    }
}

```

### Testcontainers - çœŸå®ç¯å¢ƒæµ‹è¯•

#### Testcontainersæ ¸å¿ƒä¼˜åŠ¿

æŠ€æœ¯å¯¹æ¯”ï¼š

| æµ‹è¯•æ–¹å¼ | H2å†…å­˜æ•°æ®åº“ | Testcontainers | çœŸå®ç¯å¢ƒ |
|---|---|---|---|
| çœŸå®æ€§ | ä½ | é«˜ | æœ€é«˜ |
| æ‰§è¡Œé€Ÿåº¦ | âš¡âš¡âš¡ | âš¡âš¡ | âš¡ |
| ç»´æŠ¤æˆæœ¬ | ä½ | ä¸­ç­‰ | é«˜ |
| CI/CDæ”¯æŒ | å®Œç¾ | éœ€è¦Docker | éœ€è¦ç¯å¢ƒ |

#### å¸¸ç”¨Testcontainersæ¨¡å—

| æŠ€æœ¯æ ˆ | Testcontainersæ¨¡å— | é…ç½®ç¤ºä¾‹ |
|---|---|---|
| MySQL | MySQLContainer | `new MySQLContainer<>("mysql:8.0")` |
| PostgreSQL | PostgreSQLContainer | `new PostgreSQLContainer<>("postgres:13")` |
| Redis | GenericContainer | `new GenericContainer<>("redis:6.2")` |
| Kafka | KafkaContainer | `new KafkaContainer<>("confluentinc/cp-kafka:latest")` |

## è´¨é‡ä¿éšœæŠ€æœ¯æ ˆ

### ä»£ç è¦†ç›–ç‡ - JaCoCo

#### JaCoCoè¦†ç›–ç‡æŠ¥å‘Š

Mavené…ç½®ï¼š

```xml

<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.8.8</version>
    <configuration>
        <excludes>
            <exclude>**/*Application.class</exclude>
            <exclude>/config/</exclude>
        </excludes>
    </configuration>
</plugin>

```

#### è¦†ç›–ç‡é—¨ç¦è®¾ç½®

| ç¯å¢ƒç±»å‹ | è¡Œè¦†ç›–ç‡ | åˆ†æ”¯è¦†ç›–ç‡ | ç±»è¦†ç›–ç‡ |
|---|---|---|---|
| å¼€å‘ç¯å¢ƒ | 60% | 50% | 80% |
| æµ‹è¯•ç¯å¢ƒ | 70% | 60% | 90% |
| ç”Ÿäº§ç¯å¢ƒ | 80% | 70% | 95% |

### ä»£ç è´¨é‡ - SonarQube

#### SonarQubeè´¨é‡è§„åˆ™

Javaè´¨é‡è§„åˆ™é›†ï¼š
- ä»£ç åå‘³é“ï¼š300+è§„åˆ™
- å®‰å…¨æ¼æ´ï¼š100+è§„åˆ™
- Bugæ£€æµ‹ï¼š400+è§„åˆ™
- ä»£ç å¤æ‚åº¦ï¼šåœˆå¤æ‚åº¦ã€è®¤çŸ¥å¤æ‚åº¦

#### è´¨é‡é—¨ç¦é…ç½®

```yaml

# sonar-project.properties

sonar.projectKey=java-test-stack
sonar.sources=src/main/java
sonar.tests=src/test/java
sonar.java.binaries=target/classes

# è´¨é‡é—¨ç¦

sonar.qualitygate=Java-Standard

```

### å˜å¼‚æµ‹è¯• - PIT

#### PITå˜å¼‚æµ‹è¯•åŸç†

å˜å¼‚æ“ä½œç¬¦ï¼š

| å˜å¼‚ç±»å‹ | æ“ä½œç¤ºä¾‹ | æ£€æµ‹èƒ½åŠ› |
|---|---|---|
| æ¡ä»¶è¾¹ç•Œ | `>` â†’ `>=` | è¾¹ç•Œå€¼æµ‹è¯• |
| ç®—æœ¯è¿ç®— | `+` â†’ `-` | è®¡ç®—é€»è¾‘éªŒè¯ |
| é€»è¾‘è¿ç®— | `&&` â†’ `||` | æ¡ä»¶é€»è¾‘éªŒè¯ |
| è¿”å›å€¼ | `return 1` â†’ `return 0` | è¿”å›å€¼éªŒè¯ |

#### PITé…ç½®ç¤ºä¾‹

```xml

<plugin>
    <groupId>org.pitest</groupId>
    <artifactId>pitest-maven</artifactId>
    <version>1.9.8</version>
    <configuration>
        <targetClasses>
            <param>com.example.service*</param>
        </targetClasses>
        <targetTests>
            <param>com.example.service*</param>
        </targetTests>
    </configuration>
</plugin>

```

## æµ‹è¯•å·¥å…·é“¾é›†æˆ

### CI/CDæµæ°´çº¿é›†æˆ

#### GitHub Actionsæµ‹è¯•æµæ°´çº¿

```yaml

name: Java CI with Maven
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Set up JDK 11
      uses: actions/setup-java@v3
      with:
        java-version: '11'
        distribution: 'temurin'
    
    - name: Run tests
      run: mvn clean test
    
    - name: Generate coverage report
      run: mvn jacoco:report
    
    - name: SonarQube analysis
      uses: sonarqube-quality-gate-action@master

```

#### Jenkins Pipelineç¤ºä¾‹

```groovy

pipeline {
    agent any
    stages {
        stage('Test') {
            steps {
                sh 'mvn clean test'
                junit 'target/surefire-reports/*.xml'
                jacoco(
                    execPattern: 'target/jacoco.exec',
                    classPattern: 'target/classes',
                    sourcePattern: 'src/main/java'
                )
            }
        }
    }
}

```

### æµ‹è¯•æŠ¥å‘Šå¯è§†åŒ–

#### Allureæµ‹è¯•æŠ¥å‘Š

é›†æˆé…ç½®ï¼š

```xml

<dependency>
    <groupId>io.qameta.allure</groupId>
    <artifactId>allure-junit5</artifactId>
    <version>2.20.1</version>
</dependency>

```

æŠ¥å‘Šç‰¹æ€§ï¼š
- æµ‹è¯•æ­¥éª¤å¯è§†åŒ–
- å¤±è´¥åŸå› åˆ†æ
- å†å²è¶‹åŠ¿å›¾è¡¨
- ç¯å¢ƒä¿¡æ¯å±•ç¤º

## ğŸ¯ å­¦ä¹ è·¯å¾„ä¸è¿›é˜¶æŒ‡å—

### ğŸ“š å¿«é€Ÿå¯¼èˆªçŸ©é˜µ

#### æŒ‰è§’è‰²å®šä½
| **ä½ çš„è§’è‰²** | **ç›´æ¥è·³è½¬** | **é‡ç‚¹å…³æ³¨** | **é¢„è®¡æ—¶é—´** |
|---|---|---|---|
| **æ–°æ‰‹å¼€å‘è€…** | [é˜¶æ®µä¸€ï¼šåŸºç¡€æµ‹è¯•](#é˜¶æ®µä¸€åŸºç¡€æµ‹è¯•) | JUnit5 + Mockito | 1-2å‘¨ |
| **æœ‰ç»éªŒçš„å¼€å‘è€…** | [é˜¶æ®µäºŒï¼šè¿›é˜¶æŠ€èƒ½](#é˜¶æ®µäºŒè¿›é˜¶æŠ€èƒ½) | Testcontainers + é›†æˆæµ‹è¯• | 2-3å‘¨ |
| **æŠ€æœ¯è´Ÿè´£äºº** | [é˜¶æ®µä¸‰ï¼šè´¨é‡ä¿éšœ](#é˜¶æ®µä¸‰è´¨é‡ä¿éšœ) | SonarQube + è´¨é‡é—¨ç¦ | 2-3å‘¨ |
| **æ¶æ„å¸ˆ** | [æŠ€æœ¯æ ˆé€‰æ‹©å†³ç­–æ ‘](#æŠ€æœ¯æ ˆé€‰æ‹©å†³ç­–æ ‘) | æ•´ä½“æ¶æ„è®¾è®¡ | å³æ—¶å†³ç­– |

#### æŒ‰é¡¹ç›®ç±»å‹
| **é¡¹ç›®åœºæ™¯** | **æ¨èæŠ€æœ¯æ ˆ** | **å…³é”®é…ç½®** | **å¿«é€Ÿå¼€å§‹** |
|---|---|---|---|
| **Spring Boot Web** | JUnit5 + Mockito + SpringBootTest | `@SpringBootTest` + `@MockBean` | [5åˆ†é’Ÿæ­å»º](#æ–°é¡¹ç›®æµ‹è¯•ç¯å¢ƒæ­å»º5åˆ†é’Ÿå®Œæˆ) |
| **å¾®æœåŠ¡æ¶æ„** | JUnit5 + RESTAssured + Testcontainers | `@SpringBootTest` + MockServer | [æŸ¥çœ‹ç¤ºä¾‹](./examples/spring-boot-test-example.md) |
| **æ•°æ®å¯†é›†å‹** | JUnit5 + Testcontainers + AssertJ | `@DataJpaTest` + Flyway | [æ•°æ®åº“æµ‹è¯•](./framework/Testcontainers.md) |

### ğŸš€ ä»å…¥é—¨åˆ°ç²¾é€šè·¯çº¿å›¾

#### é˜¶æ®µä¸€ï¼šåŸºç¡€æµ‹è¯•ï¼ˆ1-2å‘¨ï¼‰

å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡æ ¸å¿ƒæµ‹è¯•æŠ€èƒ½
- âœ… JUnit 5åŸºç¡€è¯­æ³•
- âœ… MockitoåŸºæœ¬ä½¿ç”¨
- âœ… AssertJæ–­è¨€æŠ€å·§
- âœ… Spring Bootæµ‹è¯•åŸºç¡€

å®è·µé¡¹ç›®ï¼š
- ä¸ºç°æœ‰Serviceå±‚æ·»åŠ å•å…ƒæµ‹è¯•
- åˆ›å»ºControllerå±‚MockMVCæµ‹è¯•
- å®ç°Repositoryå±‚@DataJpaTest

#### é˜¶æ®µäºŒï¼šè¿›é˜¶æŠ€èƒ½ï¼ˆ2-3å‘¨ï¼‰

å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡é«˜çº§æµ‹è¯•æŠ€æœ¯
- âœ… Testcontainersé›†æˆæµ‹è¯•
- âœ… æµ‹è¯•æ•°æ®ç®¡ç†ç­–ç•¥
- âœ… å¹¶å‘æµ‹è¯•æŠ€å·§
- âœ… æµ‹è¯•è¦†ç›–ç‡åˆ†æ

å®è·µé¡¹ç›®ï¼š
- æ­å»ºTestcontainersæµ‹è¯•ç¯å¢ƒ
- å®ç°æµ‹è¯•æ•°æ®æ¸…ç†ç­–ç•¥
- é…ç½®JaCoCoè¦†ç›–ç‡æŠ¥å‘Š

#### é˜¶æ®µä¸‰ï¼šè´¨é‡ä¿éšœï¼ˆ2-3å‘¨ï¼‰

å­¦ä¹ ç›®æ ‡ï¼šå»ºç«‹å®Œæ•´è´¨é‡ä½“ç³»
- âœ… SonarQubeè´¨é‡é—¨ç¦
- âœ… PITå˜å¼‚æµ‹è¯•
- âœ… CI/CDæµ‹è¯•é›†æˆ
- âœ… æµ‹è¯•æ€§èƒ½ä¼˜åŒ–

å®è·µé¡¹ç›®ï¼š
- é…ç½®SonarQubeè´¨é‡è§„åˆ™
- é›†æˆPITå˜å¼‚æµ‹è¯•
- å»ºç«‹CI/CDæµ‹è¯•æµæ°´çº¿

### æ¨èå­¦ä¹ èµ„æº

#### å®˜æ–¹æ–‡æ¡£

| æŠ€æœ¯æ ˆ | å®˜æ–¹æ–‡æ¡£ | å­¦ä¹ é‡ç‚¹ |
|---|---|---|
| JUnit 5 | https://junit.org/junit5/docs | æ³¨è§£ä½¿ç”¨ã€æ‰©å±•æ¨¡å‹ |
| Mockito | https://javadoc.io/doc/org.mockito | Mockåˆ›å»ºã€éªŒè¯æŠ€å·§ |
| AssertJ | https://assertj.github.io/doc | æµç•…APIã€æ–­è¨€æŠ€å·§ |
| Spring Test | https://spring.io/guides/gs/testing | æµ‹è¯•åˆ‡ç‰‡ã€MockBean |

#### æ¨èä¹¦ç±

å…¥é—¨çº§ï¼š
- ã€ŠJUnitå®æˆ˜ï¼ˆç¬¬3ç‰ˆï¼‰ã€‹
- ã€ŠSpringæµ‹è¯•å®æˆ˜æŒ‡å—ã€‹

è¿›é˜¶çº§ï¼š
- ã€ŠJavaæµ‹è¯•é©±åŠ¨å¼€å‘ã€‹
- ã€Šå¾®æœåŠ¡æµ‹è¯•å®æˆ˜ã€‹

æ¶æ„çº§ï¼š
- ã€ŠæŒç»­äº¤ä»˜2.0ã€‹
- ã€Šæµ‹è¯•é©±åŠ¨çš„å¾®æœåŠ¡æ¶æ„ã€‹

### æœ€ä½³å®è·µæ¸…å•

#### æµ‹è¯•ä»£ç è§„èŒƒ

```java

// âœ… ä½¿ç”¨given-when-thenç»“æ„
@Test
void shouldCalculateDiscount() {
    // given - æµ‹è¯•å‡†å¤‡
    User user = createPremiumUser();
    
    // when - æ‰§è¡Œæ“ä½œ
    BigDecimal discount = service.calculateDiscount(user);
    
    // then - éªŒè¯ç»“æœ
    assertThat(discount).isEqualTo("20.00");
}

```

#### æµ‹è¯•æ•°æ®ç®¡ç†

æµ‹è¯•æ•°æ®ç­–ç•¥ï¼š

| ç­–ç•¥ç±»å‹ | å®ç°æ–¹å¼ | é€‚ç”¨åœºæ™¯ |
|---|---|---|
| Builderæ¨¡å¼ | UserBuilder, OrderBuilder | å¤æ‚å¯¹è±¡åˆ›å»º |
| ObjectMother | UserMother, TestDataFactory | æ ‡å‡†æµ‹è¯•æ•°æ® |
| éšæœºæ•°æ® | JavaFaker, EasyRandom | æ¨¡ç³Šæµ‹è¯• |
| æ•°æ®åº“å›æ»š | @Transactional | é›†æˆæµ‹è¯• |

## æŠ€æœ¯æ ˆé€‰æ‹©å†³ç­–æ ‘

```

é¡¹ç›®éœ€æ±‚è¯„ä¼°
â”œâ”€â”€ é¡¹ç›®ç±»å‹
â”‚   â”œâ”€â”€ Spring Bootå•ä½“åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ æµ‹è¯•é‡ç‚¹ï¼šController/Service/Repository
â”‚   â”‚   â””â”€â”€ æŠ€æœ¯æ ˆï¼šJUnit5 + Mockito + SpringBootTest
â”‚   â”œâ”€â”€ å¾®æœåŠ¡æ¶æ„
â”‚   â”‚   â”œâ”€â”€ æµ‹è¯•é‡ç‚¹ï¼šAPIå¥‘çº¦ + é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ æŠ€æœ¯æ ˆï¼šJUnit5 + RESTAssured + Testcontainers
â”‚   â””â”€â”€ æ‰¹å¤„ç†ç³»ç»Ÿ
â”‚       â”œâ”€â”€ æµ‹è¯•é‡ç‚¹ï¼šä¸šåŠ¡é€»è¾‘éªŒè¯
â”‚       â””â”€â”€ æŠ€æœ¯æ ˆï¼šJUnit5 + Mockito + AssertJ
â”œâ”€â”€ å›¢é˜Ÿè§„æ¨¡
â”‚   â”œâ”€â”€ å°å›¢é˜Ÿï¼ˆ<5äººï¼‰
â”‚   â”‚   â””â”€â”€ ç®€åŒ–é…ç½®ï¼šJUnit5 + Mockito + JaCoCo
â”‚   â”œâ”€â”€ ä¸­å›¢é˜Ÿï¼ˆ5-20äººï¼‰
â”‚   â”‚   â””â”€â”€ å®Œæ•´é…ç½®ï¼šå…¨æŠ€æœ¯æ ˆ
â”‚   â””â”€â”€ å¤§å›¢é˜Ÿï¼ˆ>20äººï¼‰
â”‚       â””â”€â”€ æ ‡å‡†åŒ–ï¼šSonarQube + è´¨é‡é—¨ç¦
â””â”€â”€ è´¨é‡è¦æ±‚
    â”œâ”€â”€ åŸºç¡€è¦æ±‚
    â”‚   â””â”€â”€ è¦†ç›–ç‡>60% + åŸºæœ¬æµ‹è¯•
    â”œâ”€â”€ æ ‡å‡†è¦æ±‚
    â”‚   â””â”€â”€ è¦†ç›–ç‡>70% + è´¨é‡åˆ†æ
    â””â”€â”€ ä¸¥æ ¼è¦æ±‚
        â””â”€â”€ è¦†ç›–ç‡>80% + å˜å¼‚æµ‹è¯•

```

## ğŸš€ å¿«é€Ÿå¼€å§‹æ¸…å•ï¼ˆ5åˆ†é’Ÿå®Œæˆï¼‰

### ğŸ“¦ ä¸€é”®é…ç½®ï¼ˆå¤åˆ¶ç²˜è´´å³ç”¨ï¼‰

#### 1. Mavenä¾èµ–ï¼ˆ30ç§’ï¼‰
```xml
<!-- å¤åˆ¶åˆ°pom.xmlçš„<dependencies>éƒ¨åˆ† -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-test</artifactId>
    <scope>test</scope>
</dependency>

<!-- æ•°æ®åº“æµ‹è¯•ï¼ˆå¯é€‰ï¼‰ -->
<dependency>
    <groupId>org.testcontainers</groupId>
    <artifactId>junit-jupiter</artifactId>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.testcontainers</groupId>
    <artifactId>mysql</artifactId>
    <scope>test</scope>
</dependency>
```

#### 2. ç¬¬ä¸€ä¸ªæµ‹è¯•ï¼ˆ2åˆ†é’Ÿï¼‰
```java
// åˆ›å»ºæ–‡ä»¶ï¼šsrc/test/java/com/example/demo/ApplicationTest.java
@SpringBootTest
class ApplicationTest {
    
    @Test
    void contextLoads() {
        // Springå®¹å™¨å¯åŠ¨æµ‹è¯• âœ…
    }
    
    @Test
    void testBasicMath() {
        assertThat(2 + 2).isEqualTo(4);
    }
}
```

#### 3. ä¸€é”®è¿è¡Œï¼ˆ3åˆ†é’Ÿï¼‰
```bash
# å¤åˆ¶åˆ°ç»ˆç«¯æ‰§è¡Œ
mvn test                           # è¿è¡Œæµ‹è¯•
mvn jacoco:report                 # ç”ŸæˆæŠ¥å‘Š
open target/site/jacoco/index.html # æŸ¥çœ‹ç»“æœï¼ˆMacï¼‰
# Windows: start target/site/jacoco/index.html
```

### ğŸ” éªŒè¯æˆåŠŸæ ‡å‡†
- âœ… `mvn test` è¿è¡Œé€šè¿‡
- âœ… è¦†ç›–ç‡æŠ¥å‘Š > 60%
- âœ… ç¬¬ä¸€ä¸ªæµ‹è¯•ç»¿ç¯é€šè¿‡

### ğŸ“± ä¸‹ä¸€æ­¥æ¨è
- **æ–°æ‰‹**: ç»§ç»­[é˜¶æ®µä¸€ï¼šåŸºç¡€æµ‹è¯•](#é˜¶æ®µä¸€åŸºç¡€æµ‹è¯•)
- **æœ‰ç»éªŒ**: ç›´æ¥[æŠ€æœ¯é€‰å‹å†³ç­–ä¸­å¿ƒ](#æŠ€æœ¯é€‰å‹å†³ç­–ä¸­å¿ƒ)
- **å®æˆ˜æ´¾**: æŸ¥çœ‹[å®æˆ˜æ¡ˆä¾‹](./examples/spring-boot-test-example.md)

