import{_ as l,c as o,a as n,d,e as t,w as a,r,o as p,b as i}from"./app-CPSQE2j9.js";const c={},m={class:"table-of-contents"};function u(h,s){const e=r("router-link");return p(),o("div",null,[s[11]||(s[11]=n("h1",{id:"gité’©å­",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#gité’©å­"},[n("span",null,"Gité’©å­")])],-1)),n("nav",m,[n("ul",null,[n("li",null,[t(e,{to:"#git-é’©å­çš„ç±»å‹"},{default:a(()=>s[0]||(s[0]=[i("Git é’©å­çš„ç±»å‹")])),_:1,__:[0]}),n("ul",null,[n("li",null,[t(e,{to:"#å®¢æˆ·ç«¯é’©å­-client-side-hooks"},{default:a(()=>s[1]||(s[1]=[i("å®¢æˆ·ç«¯é’©å­ï¼ˆClient-Side Hooksï¼‰")])),_:1,__:[1]})]),n("li",null,[t(e,{to:"#æœåŠ¡ç«¯é’©å­-server-side-hooks"},{default:a(()=>s[2]||(s[2]=[i("æœåŠ¡ç«¯é’©å­ï¼ˆServer-Side Hooksï¼‰")])),_:1,__:[2]})])])]),n("li",null,[t(e,{to:"#git-é’©å­çš„å­˜æ”¾ä½ç½®"},{default:a(()=>s[3]||(s[3]=[i("Git é’©å­çš„å­˜æ”¾ä½ç½®")])),_:1,__:[3]})]),n("li",null,[t(e,{to:"#ç¤ºä¾‹-pre-commit-é’©å­"},{default:a(()=>s[4]||(s[4]=[i("ç¤ºä¾‹ï¼špre-commit é’©å­")])),_:1,__:[4]}),n("ul",null,[n("li",null,[t(e,{to:"#åŠŸèƒ½"},{default:a(()=>s[5]||(s[5]=[i("åŠŸèƒ½")])),_:1,__:[5]})]),n("li",null,[t(e,{to:"#å®ç°æ­¥éª¤"},{default:a(()=>s[6]||(s[6]=[i("å®ç°æ­¥éª¤")])),_:1,__:[6]})])])]),n("li",null,[t(e,{to:"#ç®¡ç†-git-é’©å­çš„å·¥å…·-husky-æ¨è"},{default:a(()=>s[7]||(s[7]=[i("ç®¡ç† Git é’©å­çš„å·¥å…·ï¼šhuskyï¼ˆæ¨èï¼‰")])),_:1,__:[7]})]),n("li",null,[t(e,{to:"#è·³è¿‡é’©å­"},{default:a(()=>s[8]||(s[8]=[i("è·³è¿‡é’©å­")])),_:1,__:[8]})]),n("li",null,[t(e,{to:"#æœ€ä½³å®è·µ"},{default:a(()=>s[9]||(s[9]=[i("æœ€ä½³å®è·µ")])),_:1,__:[9]})]),n("li",null,[t(e,{to:"#æ€»ç»“"},{default:a(()=>s[10]||(s[10]=[i("æ€»ç»“")])),_:1,__:[10]})])])]),s[12]||(s[12]=d(`<div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>Git é’©å­ï¼ˆGit Hooksï¼‰æ˜¯ Git åœ¨<strong>ç‰¹å®šäº‹ä»¶</strong>ï¼ˆå¦‚æäº¤ã€æ¨é€ã€åˆå¹¶ç­‰ï¼‰å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘çš„<strong>è‡ªå®šä¹‰è„šæœ¬</strong>ã€‚å®ƒä»¬å…è®¸å¼€å‘è€…åœ¨ Git å·¥ä½œæµç¨‹çš„å„ä¸ªé˜¶æ®µæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>ä»£ç æ£€æŸ¥</strong>ï¼ˆå¦‚ ESLintã€Prettierï¼‰</li><li><strong>æµ‹è¯•è¿è¡Œ</strong>ï¼ˆå¦‚ <code>npm test</code>ï¼‰</li><li><strong>æäº¤ä¿¡æ¯éªŒè¯</strong></li><li><strong>åˆ†æ”¯ä¿æŠ¤</strong>ï¼ˆå¦‚ç¦æ­¢ç›´æ¥æ¨é€åˆ° <code>main</code> åˆ†æ”¯ï¼‰</li></ul></div><h2 id="git-é’©å­çš„ç±»å‹" tabindex="-1"><a class="header-anchor" href="#git-é’©å­çš„ç±»å‹"><span><strong>Git é’©å­çš„ç±»å‹</strong></span></a></h2><p>Git é’©å­åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><h3 id="å®¢æˆ·ç«¯é’©å­-client-side-hooks" tabindex="-1"><a class="header-anchor" href="#å®¢æˆ·ç«¯é’©å­-client-side-hooks"><span><strong>å®¢æˆ·ç«¯é’©å­ï¼ˆClient-Side Hooksï¼‰</strong></span></a></h3><p>åœ¨æœ¬åœ° Git ä»“åº“è§¦å‘ï¼Œä»…å½±å“å½“å‰ç”¨æˆ·çš„æ“ä½œï¼š</p><table><thead><tr><th>é’©å­åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td><code>pre-commit</code></td><td>æ‰§è¡Œ <code>git commit</code> å‰</td><td>æ£€æŸ¥ä»£ç é£æ ¼ã€è¿è¡Œæµ‹è¯•</td></tr><tr><td><code>prepare-commit-msg</code></td><td>ç”Ÿæˆæäº¤ä¿¡æ¯åï¼Œç¼–è¾‘å™¨æ‰“å¼€å‰</td><td>è‡ªåŠ¨ç”Ÿæˆæäº¤ä¿¡æ¯æ¨¡æ¿</td></tr><tr><td><code>commit-msg</code></td><td>æäº¤ä¿¡æ¯ç¼–è¾‘å®Œæˆå</td><td>éªŒè¯æäº¤ä¿¡æ¯æ ¼å¼ï¼ˆå¦‚ç¬¦åˆ Conventional Commitsï¼‰</td></tr><tr><td><code>post-commit</code></td><td>æäº¤å®Œæˆå</td><td>å‘é€é€šçŸ¥ã€è®°å½•æ—¥å¿—</td></tr><tr><td><code>pre-push</code></td><td>æ‰§è¡Œ <code>git push</code> å‰</td><td>è¿è¡Œå®Œæ•´æµ‹è¯•ï¼Œé˜²æ­¢æ¨é€é”™è¯¯ä»£ç </td></tr></tbody></table><h3 id="æœåŠ¡ç«¯é’©å­-server-side-hooks" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯é’©å­-server-side-hooks"><span><strong>æœåŠ¡ç«¯é’©å­ï¼ˆServer-Side Hooksï¼‰</strong></span></a></h3><p>åœ¨ Git æœåŠ¡å™¨ï¼ˆå¦‚ GitHubã€GitLabï¼‰ä¸Šè§¦å‘ï¼Œç”¨äºå¼ºåˆ¶æ‰§è¡Œå›¢é˜Ÿè§„åˆ™ï¼š</p><table><thead><tr><th>é’©å­åç§°</th><th>è§¦å‘æ—¶æœº</th><th>å¸¸è§ç”¨é€”</th></tr></thead><tbody><tr><td><code>pre-receive</code></td><td>æ¨é€å‰ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰</td><td>æ£€æŸ¥æäº¤æ˜¯å¦ç¬¦åˆè§„èŒƒ</td></tr><tr><td><code>update</code></td><td>æ¯ä¸ªåˆ†æ”¯æ›´æ–°å‰</td><td>ç²¾ç»†æ§åˆ¶åˆ†æ”¯æƒé™</td></tr><tr><td><code>post-receive</code></td><td>æ¨é€å®Œæˆå</td><td>è§¦å‘ CI/CDã€å‘é€é€šçŸ¥</td></tr></tbody></table><h2 id="git-é’©å­çš„å­˜æ”¾ä½ç½®" tabindex="-1"><a class="header-anchor" href="#git-é’©å­çš„å­˜æ”¾ä½ç½®"><span><strong>Git é’©å­çš„å­˜æ”¾ä½ç½®</strong></span></a></h2><p>Git é’©å­è„šæœ¬å­˜å‚¨åœ¨é¡¹ç›®çš„ <code>.git/hooks/</code> ç›®å½•ä¸‹ï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">.git/</span>
<span class="line">â””â”€â”€ hooks/</span>
<span class="line">    â”œâ”€â”€ pre-commit.sample</span>
<span class="line">    â”œâ”€â”€ commit-msg.sample</span>
<span class="line">    â”œâ”€â”€ pre-push.sample</span>
<span class="line">    â””â”€â”€ ...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›æ–‡ä»¶ä»¥ <code>.sample</code> ç»“å°¾ï¼Œ<strong>ä¸ä¼šç”Ÿæ•ˆ</strong>ã€‚</li><li><strong>å¯ç”¨é’©å­</strong>ï¼šåˆ é™¤ <code>.sample</code> åç¼€å¹¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">mv</span> .git/hooks/pre-commit.sample .git/hooks/pre-commit</span>
<span class="line"><span class="token function">chmod</span> +x .git/hooks/pre-commit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="ç¤ºä¾‹-pre-commit-é’©å­" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-pre-commit-é’©å­"><span><strong>ç¤ºä¾‹ï¼š<code>pre-commit</code> é’©å­</strong></span></a></h2><h3 id="åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#åŠŸèƒ½"><span><strong>åŠŸèƒ½</strong></span></a></h3><p>é™åˆ¶ dev åˆ†æ”¯çš„æäº¤ã€‚</p><h3 id="å®ç°æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#å®ç°æ­¥éª¤"><span><strong>å®ç°æ­¥éª¤</strong></span></a></h3><ol><li>åˆ›å»º <code>pre-commit</code> æ–‡ä»¶ï¼ˆ<code>.git/hooks/pre-commit</code>ï¼‰ï¼š</li></ol><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">#!/bin/sh</span>
<span class="line">#</span>
<span class="line"># An example hook script to verify what is about to be committed.</span>
<span class="line"># Called by &quot;git commit&quot; with no arguments.  The hook should</span>
<span class="line"># exit with non-zero status after issuing an appropriate message if</span>
<span class="line"># it wants to stop the commit.</span>
<span class="line">#</span>
<span class="line"># To enable this hook, rename this file to &quot;pre-commit&quot;.</span>
<span class="line">#!/bin/sh</span>
<span class="line"></span>
<span class="line">CURRENT_BRANCH=$(git branch --show-current)</span>
<span class="line"></span>
<span class="line">if [ &quot;$CURRENT_BRANCH&quot; = &quot;dev/dev&quot; ]; then</span>
<span class="line">    echo &quot;âŒ é”™è¯¯ï¼šä¸å…è®¸ç›´æ¥å‘ dev åˆ†æ”¯æäº¤ä»£ç ï¼è¯·åˆ›å»ºæ–°åˆ†æ”¯å¹¶æäº¤ PRã€‚&quot;</span>
<span class="line">    exit 1  # é˜»æ­¢æäº¤</span>
<span class="line">fi</span>
<span class="line">exit 0  # å…è®¸æäº¤</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>èµ‹äºˆæ‰§è¡Œæƒé™ï¼š<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">chmod</span> +x .git/hooks/pre-commit</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>æµ‹è¯•ï¼š<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;test&quot;</span>  <span class="token comment"># æäº¤åˆ° dev åˆ†æ”¯ä¼šå¤±è´¥</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="ç®¡ç†-git-é’©å­çš„å·¥å…·-husky-æ¨è" tabindex="-1"><a class="header-anchor" href="#ç®¡ç†-git-é’©å­çš„å·¥å…·-husky-æ¨è"><span><strong>ç®¡ç† Git é’©å­çš„å·¥å…·ï¼šhuskyï¼ˆæ¨èï¼‰</strong></span></a></h2><p>æ‰‹åŠ¨ç®¡ç†é’©å­å®¹æ˜“å‡ºé”™ï¼Œæ¨èä½¿ç”¨å·¥å…·ï¼š</p><ul><li><strong>å®‰è£…</strong>ï¼š<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span> husky --save-dev</span>
<span class="line">npx husky <span class="token function">install</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>æ·»åŠ é’©å­</strong>ï¼š<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">&quot;npm test&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><strong>ç¤ºä¾‹</strong>ï¼ˆ<code>.husky/pre-commit</code>ï¼‰ï¼š<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token shebang important">#!/bin/sh</span></span>
<span class="line"><span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">npm</span> run lint</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="è·³è¿‡é’©å­" tabindex="-1"><a class="header-anchor" href="#è·³è¿‡é’©å­"><span><strong>è·³è¿‡é’©å­</strong></span></a></h2><p>å¦‚æœä¸´æ—¶éœ€è¦ç»•è¿‡é’©å­æ£€æŸ¥ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">git</span> commit --no-verify  <span class="token comment"># è·³è¿‡ pre-commit å’Œ commit-msg é’©å­</span></span>
<span class="line"><span class="token function">git</span> push --no-verify    <span class="token comment"># è·³è¿‡ pre-push é’©å­</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æœ€ä½³å®è·µ" tabindex="-1"><a class="header-anchor" href="#æœ€ä½³å®è·µ"><span><strong>æœ€ä½³å®è·µ</strong></span></a></h2><ol><li><strong>ä¼˜å…ˆä½¿ç”¨ <code>husky</code></strong>ï¼šé¿å…æ‰‹åŠ¨ç®¡ç†é’©å­æ–‡ä»¶ã€‚</li><li><strong>è½»é‡åŒ–é’©å­é€»è¾‘</strong>ï¼šé¿å…åœ¨é’©å­ä¸­è¿è¡Œè€—æ—¶æ“ä½œï¼ˆå¦‚å®Œæ•´æ„å»ºï¼‰ã€‚</li><li><strong>å›¢é˜Ÿå…±äº«é’©å­</strong>ï¼šå°†é’©å­è„šæœ¬çº³å…¥ç‰ˆæœ¬æ§åˆ¶ï¼ˆå¦‚æ”¾åœ¨ <code>.husky/</code> ç›®å½•ï¼‰ã€‚</li><li><strong>ç»“åˆ CI/CD</strong>ï¼šä»…ç”¨é’©å­åšå¿«é€Ÿæ£€æŸ¥ï¼Œå¤æ‚é€»è¾‘äº¤ç»™ CIï¼ˆå¦‚ GitHub Actionsï¼‰ã€‚</li></ol><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span><strong>æ€»ç»“</strong></span></a></h2><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>ä¸ªäººé¡¹ç›®</strong></td><td>æ‰‹åŠ¨é’©å­æˆ– <code>husky</code></td></tr><tr><td><strong>å›¢é˜Ÿé¡¹ç›®</strong></td><td><code>husky</code> + åˆ†æ”¯ä¿æŠ¤è§„åˆ™</td></tr><tr><td><strong>æœåŠ¡ç«¯å¼ºåˆ¶æ£€æŸ¥</strong></td><td>GitHub/GitLab çš„ <code>pre-receive</code> é’©å­</td></tr></tbody></table><p>Git é’©å­æ˜¯è‡ªåŠ¨åŒ–å·¥ä½œæµçš„å¼ºå¤§å·¥å…·ï¼Œåˆç†ä½¿ç”¨å¯ä»¥æ˜¾è‘—æå‡ä»£ç è´¨é‡å’Œå›¢é˜Ÿåä½œæ•ˆç‡ï¼ ğŸš€</p>`,31))])}const v=l(c,[["render",u]]),b=JSON.parse('{"path":"/posts/git/git-hooks.html","title":"Gité’©å­","lang":"zh-CN","frontmatter":{"title":"Gité’©å­","date":"2025-05-30T05:26:27.248Z","category":["git"],"tags":["git","hooks","Git Hooks"]},"git":{"updatedTime":1750750917000,"contributors":[{"name":"zhaomy","username":"zhaomy","email":"3036190149@qq.com","commits":2,"url":"https://github.com/zhaomy"}],"changelog":[{"hash":"d72ca8e867076fb230331ac91b3c1b164a0e500f","time":1750750917000,"email":"3036190149@qq.com","author":"zhaomy","message":"1ã€javaï¼šjsonã€MyBatis 2ã€Springé›†æˆOracle 3ã€æºç è§£æ 4ã€Markdownæ–‡ä»¶æ ¼å¼åŒ–ï¼šå»é™¤å­—ä½“"},{"hash":"be725b60ba85d78160de7057ffb905092b5a4acb","time":1748585079000,"email":"3036190149@qq.com","author":"zhaomy","message":"GitHooks"}]},"filePathRelative":"posts/git/git-hooks.md","excerpt":"\\n\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">æç¤º</p>\\n<p>Git é’©å­ï¼ˆGit Hooksï¼‰æ˜¯ Git åœ¨<strong>ç‰¹å®šäº‹ä»¶</strong>ï¼ˆå¦‚æäº¤ã€æ¨é€ã€åˆå¹¶ç­‰ï¼‰å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘çš„<strong>è‡ªå®šä¹‰è„šæœ¬</strong>ã€‚å®ƒä»¬å…è®¸å¼€å‘è€…åœ¨ Git å·¥ä½œæµç¨‹çš„å„ä¸ªé˜¶æ®µæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œä¾‹å¦‚ï¼š</p>\\n<ul>\\n<li><strong>ä»£ç æ£€æŸ¥</strong>ï¼ˆå¦‚ ESLintã€Prettierï¼‰</li>\\n<li><strong>æµ‹è¯•è¿è¡Œ</strong>ï¼ˆå¦‚ <code>npm test</code>ï¼‰</li>\\n<li><strong>æäº¤ä¿¡æ¯éªŒè¯</strong></li>\\n<li><strong>åˆ†æ”¯ä¿æŠ¤</strong>ï¼ˆå¦‚ç¦æ­¢ç›´æ¥æ¨é€åˆ° <code>main</code> åˆ†æ”¯ï¼‰</li>\\n</ul>\\n</div>"}');export{v as comp,b as data};
