import{_ as u,c as o,a as s,d as i,e,w as p,b as a,r as c,o as r}from"./app-BunaFDua.js";const k={},d={class:"table-of-contents"};function v(m,n){const l=c("router-link"),t=c("Tip");return r(),o("div",null,[n[11]||(n[11]=s("h1",{id:"部署vuepress到云服务器",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#部署vuepress到云服务器"},[s("span",null,"部署VuePress到云服务器")])],-1)),s("nav",d,[s("ul",null,[s("li",null,[e(l,{to:"#编写workflow文档"},{default:p(()=>n[0]||(n[0]=[a("编写workflow文档")])),_:1,__:[0]})]),s("li",null,[e(l,{to:"#准备需要的secrets"},{default:p(()=>n[1]||(n[1]=[a("准备需要的Secrets")])),_:1,__:[1]})]),s("li",null,[e(l,{to:"#云服务器配置"},{default:p(()=>n[2]||(n[2]=[a("云服务器配置")])),_:1,__:[2]})]),s("li",null,[e(l,{to:"#注意事项"},{default:p(()=>n[3]||(n[3]=[a("注意事项")])),_:1,__:[3]})])])]),n[12]||(n[12]=i(`<h2 id="编写workflow文档" tabindex="-1"><a class="header-anchor" href="#编写workflow文档"><span>编写workflow文档</span></a></h2><p>在项目根目录下创建.github/workflows/deploy.yml文件，内容如下所示，这里给出了同时部署到云服务器和Github Pages的workflow文档，可以根据需要选择其中一个：</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code><span class="line"></span>
<span class="line"><span class="token key atrule">name</span><span class="token punctuation">:</span> 部署文档</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">on</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">push</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">branches</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token comment"># 确保这是你正在使用的分支名称</span></span>
<span class="line">      <span class="token punctuation">-</span> main</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">permissions</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">contents</span><span class="token punctuation">:</span> write</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">jobs</span><span class="token punctuation">:</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">build-docs</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> 构建文档</span>
<span class="line">    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest</span>
<span class="line">    <span class="token key atrule">steps</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 1. 检出代码</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 2. 设置 Node.js</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v4</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">22</span></span>
<span class="line">          <span class="token key atrule">cache</span><span class="token punctuation">:</span> npm</span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 3. 安装依赖</span>
<span class="line">        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install</span>
<span class="line"></span>
<span class="line">      <span class="token comment"># 构建文档，并将控制台输出重定向到文件.nojekyll</span></span>
<span class="line">      <span class="token comment"># .nojekyll 文件用于跳过 Jekyll 的默认处理流程，直接原样托管静态文件，文件内容不重要，文件存在即可</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 4. 构建文档</span>
<span class="line">        <span class="token key atrule">env</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">NODE_OPTIONS</span><span class="token punctuation">:</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>max_old_space_size=8192</span>
<span class="line">        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span></span>
<span class="line">          npm run build</span>
<span class="line">          <span class="token punctuation">&gt;</span> docs/.vuepress/dist/.nojekyll</span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 5. 上传构建产物</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>artifact@v4</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">name</span><span class="token punctuation">:</span> docs<span class="token punctuation">-</span>dist</span>
<span class="line">          <span class="token key atrule">path</span><span class="token punctuation">:</span> docs/.vuepress/dist/</span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">deploy-server</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> 部署到云服务器</span>
<span class="line">    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest</span>
<span class="line">    <span class="token key atrule">needs</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>docs  <span class="token comment"># 确保先完成构建文档</span></span>
<span class="line">    <span class="token key atrule">steps</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 1. 下载构建产物</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/download<span class="token punctuation">-</span>artifact@v4</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">name</span><span class="token punctuation">:</span> docs<span class="token punctuation">-</span>dist</span>
<span class="line">          <span class="token key atrule">path</span><span class="token punctuation">:</span> docs</span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 2. 打包构建产物</span>
<span class="line">        <span class="token key atrule">run</span><span class="token punctuation">:</span> tar <span class="token punctuation">-</span>czvf docs.tar.gz <span class="token punctuation">-</span>C docs/ .</span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 3. 传输到服务器</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> appleboy/scp<span class="token punctuation">-</span>action@v1</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">host</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.HOST <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token key atrule">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.USERNAME <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.KEY <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token key atrule">source</span><span class="token punctuation">:</span> docs.tar.gz</span>
<span class="line">          <span class="token key atrule">target</span><span class="token punctuation">:</span> /tmp/</span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 4. 部署到服务器</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> appleboy/ssh<span class="token punctuation">-</span>action@v1</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">host</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.HOST <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token key atrule">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.USERNAME <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.KEY <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line">          <span class="token key atrule">script</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">            mkdir -p /www/wwwroot/vuepress # 宝塔面板Nginx默认网站跟目录</span>
<span class="line">            cd /www/wwwroot/vuepress</span>
<span class="line">            rm -rf ./*</span>
<span class="line">            echo &quot;解压前文件列表：&quot; &amp;&amp; ls -l</span>
<span class="line">            tar -xzvf /tmp/docs.tar.gz -C .</span>
<span class="line">            echo &quot;解压后文件列表：&quot; &amp;&amp; ls -l</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">deploy-gh-pages</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> 部署文档到GitHub Pages</span>
<span class="line">    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest</span>
<span class="line">    <span class="token key atrule">needs</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>docs  <span class="token comment"># 确保先完成构建文档</span></span>
<span class="line">    <span class="token key atrule">steps</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 1. 检出代码</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">0</span></span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 2. 下载构建产物</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/download<span class="token punctuation">-</span>artifact@v4</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">name</span><span class="token punctuation">:</span> docs<span class="token punctuation">-</span>dist</span>
<span class="line">          <span class="token key atrule">path</span><span class="token punctuation">:</span> docs</span>
<span class="line"></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> 3. 部署文档</span>
<span class="line">        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@v4</span>
<span class="line">        <span class="token key atrule">with</span><span class="token punctuation">:</span></span>
<span class="line">          <span class="token key atrule">branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages</span>
<span class="line">          <span class="token key atrule">folder</span><span class="token punctuation">:</span> docs</span>
<span class="line">          <span class="token key atrule">clean</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># 自动清理旧文件</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>npm ci 命令会严格依照 package-lock.json 安装依赖，比 npm install 更严格，不容许任何版本偏差。因此需要将本地的 package-lock.json 文件上传到云服务器，以确保部署时使用相同的依赖版本。</p></div><h2 id="准备需要的secrets" tabindex="-1"><a class="header-anchor" href="#准备需要的secrets"><span>准备需要的Secrets</span></a></h2><p>在仓库的Settings中，点击Secrets，添加以下Secrets：</p><ul><li>HOST：云服务器的域名或IP地址</li><li>USERNAME：SSH登录用户名</li><li>KEY：SSH私钥(完整内容)</li></ul><h2 id="云服务器配置" tabindex="-1"><a class="header-anchor" href="#云服务器配置"><span>云服务器配置</span></a></h2><p>宝塔面板默认配置文件：</p>`,9)),s("ul",null,[s("li",null,[n[6]||(n[6]=a("配置文件目录：/www/server/nginx/conf/ ")),s("ul",null,[s("li",null,[n[5]||(n[5]=a("默认配置文件：/www/server/nginx/conf/nginx.conf ")),e(t,null,{default:p(()=>n[4]||(n[4]=[a("默认配置文件是 Nginx 的主配置文件，一般情况下，不需要修改。")])),_:1,__:[4]})])])]),s("li",null,[n[10]||(n[10]=a("站点配置文件目录：/www/server/panel/vhost/nginx/ ")),s("ul",null,[s("li",null,[n[8]||(n[8]=a("默认站点配置文件：/www/server/panel/vhost/nginx/0.default.conf ")),e(t,null,{default:p(()=>n[7]||(n[7]=[a("如果没有找到默认站点配置文件，可以手动创建。")])),_:1,__:[7]})]),n[9]||(n[9]=s("li",null,"每个站点一个文件：/www/server/panel/vhost/nginx/vuepress.conf",-1))])])]),n[13]||(n[13]=i(`<p>vuepress.conf 配置文件内容：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">cat</span> <span class="token operator">&gt;</span> /www/server/panel/vhost/nginx/vuepress.conf <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">server {</span>
<span class="line">    listen 80 default_server; # 监听 80 端口</span>
<span class="line">    # 指定域名，_匹配所有未定义的请求，在新版Nginx中，更推荐显式使用 default_server，可以不设置server_name 或设为空</span>
<span class="line">    server_name _; </span>
<span class="line">    root /www/wwwroot/;# </span>
<span class="line">    index index.html index.php;</span>
<span class="line">    access_log /www/wwwlogs/vuepress.log;</span>
<span class="line">    error_log /www/wwwlogs/vuepress.error.log;</span>
<span class="line">}</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>root配置为/www/wwwroot/，而不是/www/wwwroot/vuepress/，这是因为vuepress访问路径为http://ip/vuepress，若配置根目录为/www/wwwroot/vuepress/，就会从/www/wwwroot/vuepress/vuepress/目录下找index.html文件，导致找不到。</p><p>其实这里的配置放在0.default.conf中也行，但同样注意root不能配置为/www/wwwroot/default，否则会出现和上面一样的错误（或者把vuepress目录放到/www/wwwroot/default/目录下也行，两种方式任选其一）。</p><p>vuepress.conf和0.default.conf的配置，如果使用完全相同的<code>server_name</code>和<code>listen</code>指令会冲突，导致nginx启动失败。</p><p>站点的区分可以基于：域名、端口、IP地址、路径等：</p><ul><li>域名（最常用）： 通过 server_name 指令区分 <code>server_name www.example.com</code></li><li>端口： 通过 listen 指令区分 <code>listen 8080</code></li><li>IP地址（较少使用）： 通过 listen 绑定不同IP <code>listen 192.168.1.100:80</code></li><li>路径：通过location指令区分 <code>location /vuepress{ alias /www/wwwroot/vuepress; }</code></li></ul></div><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h2><ul><li>如果md文件格式有错误，会导致云端部署失败（本地运行<code>vuepress dev docs</code>时不会报错，只会在访问到该页面时报错，所以部署后需要查看日志排查错误）</li></ul>`,5))])}const y=u(k,[["render",v]]),w=JSON.parse('{"path":"/posts/vuepress/vuepress_cloud.html","title":"部署VuePress到云服务器","lang":"zh-CN","frontmatter":{"title":"部署VuePress到云服务器","date":"2025-07-09T07:32:26.463Z","category":["vuepress","cloud"],"tags":["vuepress","cloud"]},"git":{"updatedTime":1753077889000,"contributors":[{"name":"zhaomy","username":"zhaomy","email":"3036190149@qq.com","commits":2,"url":"https://github.com/zhaomy"}],"changelog":[{"hash":"8b8e78fec1b97b6f54b1b1cee02a669be5ca334f","time":1753077889000,"email":"3036190149@qq.com","author":"zhaomy","message":"1. 修改GitHub Action 配置文件位置"},{"hash":"298db5b4a5a660b53712d5f6c1a01bb74f0bf2ee","time":1752224613000,"email":"3036190149@qq.com","author":"zhaomy","message":"1、部署VuePress到云服务器"}]},"filePathRelative":"posts/vuepress/vuepress_cloud.md","excerpt":"\\n\\n<h2>编写workflow文档</h2>\\n<p>在项目根目录下创建.github/workflows/deploy.yml文件，内容如下所示，这里给出了同时部署到云服务器和Github Pages的workflow文档，可以根据需要选择其中一个：</p>\\n<div class=\\"language-yaml line-numbers-mode\\" data-highlighter=\\"prismjs\\" data-ext=\\"yml\\"><pre><code><span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 部署文档</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token key atrule\\">on</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">  <span class=\\"token key atrule\\">push</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">branches</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">      <span class=\\"token comment\\"># 确保这是你正在使用的分支名称</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> main</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token key atrule\\">permissions</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">  <span class=\\"token key atrule\\">contents</span><span class=\\"token punctuation\\">:</span> write</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span class=\\"token key atrule\\">jobs</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">  <span class=\\"token key atrule\\">build-docs</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 构建文档</span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">runs-on</span><span class=\\"token punctuation\\">:</span> ubuntu<span class=\\"token punctuation\\">-</span>latest</span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">steps</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 1. 检出代码</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/checkout@v4</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">fetch-depth</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 2. 设置 Node.js</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/setup<span class=\\"token punctuation\\">-</span>node@v4</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">node-version</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">22</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">cache</span><span class=\\"token punctuation\\">:</span> npm</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 3. 安装依赖</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">run</span><span class=\\"token punctuation\\">:</span> npm install</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token comment\\"># 构建文档，并将控制台输出重定向到文件.nojekyll</span></span>\\n<span class=\\"line\\">      <span class=\\"token comment\\"># .nojekyll 文件用于跳过 Jekyll 的默认处理流程，直接原样托管静态文件，文件内容不重要，文件存在即可</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 4. 构建文档</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">env</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">NODE_OPTIONS</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">-</span><span class=\\"token punctuation\\">-</span>max_old_space_size=8192</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">run</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">|</span><span class=\\"token punctuation\\">-</span></span>\\n<span class=\\"line\\">          npm run build</span>\\n<span class=\\"line\\">          <span class=\\"token punctuation\\">&gt;</span> docs/.vuepress/dist/.nojekyll</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 5. 上传构建产物</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/upload<span class=\\"token punctuation\\">-</span>artifact@v4</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> docs<span class=\\"token punctuation\\">-</span>dist</span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">path</span><span class=\\"token punctuation\\">:</span> docs/.vuepress/dist/</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">  <span class=\\"token key atrule\\">deploy-server</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 部署到云服务器</span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">runs-on</span><span class=\\"token punctuation\\">:</span> ubuntu<span class=\\"token punctuation\\">-</span>latest</span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">needs</span><span class=\\"token punctuation\\">:</span> build<span class=\\"token punctuation\\">-</span>docs  <span class=\\"token comment\\"># 确保先完成构建文档</span></span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">steps</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 1. 下载构建产物</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/download<span class=\\"token punctuation\\">-</span>artifact@v4</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> docs<span class=\\"token punctuation\\">-</span>dist</span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">path</span><span class=\\"token punctuation\\">:</span> docs</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 2. 打包构建产物</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">run</span><span class=\\"token punctuation\\">:</span> tar <span class=\\"token punctuation\\">-</span>czvf docs.tar.gz <span class=\\"token punctuation\\">-</span>C docs/ .</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 3. 传输到服务器</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> appleboy/scp<span class=\\"token punctuation\\">-</span>action@v1</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">host</span><span class=\\"token punctuation\\">:</span> $<span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> secrets.HOST <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">username</span><span class=\\"token punctuation\\">:</span> $<span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> secrets.USERNAME <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">key</span><span class=\\"token punctuation\\">:</span> $<span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> secrets.KEY <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">source</span><span class=\\"token punctuation\\">:</span> docs.tar.gz</span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">target</span><span class=\\"token punctuation\\">:</span> /tmp/</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 4. 部署到服务器</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> appleboy/ssh<span class=\\"token punctuation\\">-</span>action@v1</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">host</span><span class=\\"token punctuation\\">:</span> $<span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> secrets.HOST <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">username</span><span class=\\"token punctuation\\">:</span> $<span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> secrets.USERNAME <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">key</span><span class=\\"token punctuation\\">:</span> $<span class=\\"token punctuation\\">{</span><span class=\\"token punctuation\\">{</span> secrets.KEY <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">}</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">script</span><span class=\\"token punctuation\\">:</span> <span class=\\"token punctuation\\">|</span><span class=\\"token scalar string\\"></span>\\n<span class=\\"line\\">            mkdir -p /www/wwwroot/vuepress # 宝塔面板Nginx默认网站跟目录</span>\\n<span class=\\"line\\">            cd /www/wwwroot/vuepress</span>\\n<span class=\\"line\\">            rm -rf ./*</span>\\n<span class=\\"line\\">            echo \\"解压前文件列表：\\" &amp;&amp; ls -l</span>\\n<span class=\\"line\\">            tar -xzvf /tmp/docs.tar.gz -C .</span>\\n<span class=\\"line\\">            echo \\"解压后文件列表：\\" &amp;&amp; ls -l</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">  <span class=\\"token key atrule\\">deploy-gh-pages</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 部署文档到GitHub Pages</span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">runs-on</span><span class=\\"token punctuation\\">:</span> ubuntu<span class=\\"token punctuation\\">-</span>latest</span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">needs</span><span class=\\"token punctuation\\">:</span> build<span class=\\"token punctuation\\">-</span>docs  <span class=\\"token comment\\"># 确保先完成构建文档</span></span>\\n<span class=\\"line\\">    <span class=\\"token key atrule\\">steps</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 1. 检出代码</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/checkout@v4</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">fetch-depth</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">0</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 2. 下载构建产物</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> actions/download<span class=\\"token punctuation\\">-</span>artifact@v4</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> docs<span class=\\"token punctuation\\">-</span>dist</span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">path</span><span class=\\"token punctuation\\">:</span> docs</span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\">      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> 3. 部署文档</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">uses</span><span class=\\"token punctuation\\">:</span> JamesIves/github<span class=\\"token punctuation\\">-</span>pages<span class=\\"token punctuation\\">-</span>deploy<span class=\\"token punctuation\\">-</span>action@v4</span>\\n<span class=\\"line\\">        <span class=\\"token key atrule\\">with</span><span class=\\"token punctuation\\">:</span></span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">branch</span><span class=\\"token punctuation\\">:</span> gh<span class=\\"token punctuation\\">-</span>pages</span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">folder</span><span class=\\"token punctuation\\">:</span> docs</span>\\n<span class=\\"line\\">          <span class=\\"token key atrule\\">clean</span><span class=\\"token punctuation\\">:</span> <span class=\\"token boolean important\\">true</span>  <span class=\\"token comment\\"># 自动清理旧文件</span></span>\\n<span class=\\"line\\"></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}');export{y as comp,w as data};
